<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">

<head>
  <!--  THINGS GOES HERE 0  -->
  <!--  my title  -->
  <title> CaliBoy : About Calibration </title>
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
  <script src="scripts/superfish.js" type="text/javascript"></script>
  <script src="scripts/narrow.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="style/superfish.css" />
  <link rel="stylesheet" type="text/css" href="style/narrow.css" />
  <link rel="stylesheet" type="text/css" href="style/style.css" /> 
</head>

<body class="" onload="CheckEmptyAndLoadList();">
  
  <div class="header" id="docheader">
    <div class="content"> 
      <div id="nav-logo"> <a href="index.html">Home</a> </div>
      <a href="index.html" class="qtref"><span>CaliBoy Reference Documentation</span></a>
      <div id="narrowsearch"> </div>
      <div id="nav-topright"> </div>
      <div id="shortCut">
        <ul>
          <li class="shortCut-topleft-inactive">2.0.0.201803</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="wrapper">

    <div class="hd"> <span></span> </div>

    <div class="bd group">

      <div class="sidebar"> 
        <div class="box first bottombar" id="introduce">
          <h2 title="Introduce"><span></span> 概述 </h2>
          <div  id="list001" class="list">
            <ul id="ul001" >
              <li class="defaultLink"><a href="about_caliboy.html">软件说明</a></li>
              <li class="defaultLink"><a href="about_pickgridcorners.html">关于角点检测</a></li>
              <li class="defaultLink"><a href="about_calibration.html">关于标定算法</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="instruction">
          <h2 title="Instruction"><span></span> 操作说明 </h2>
          <div id="list002" class="list">
            <ul id="ul002" >
               <li class="defaultLink"><a href="loadimages.html#image_open">导入图像</a></li> 
               <li class="defaultLink"><a href="loadimages.html#image_add">添加图像</a></li> 
               <li class="defaultLink"><a href="pickcorners.html">角点检测</a></li> 
               <li class="defaultLink"><a href="calibratecamera.html">标定相机</a></li>  
               <li class="defaultLink"><a href="import_export.html">导入导出结果</a></li> 
            </ul>  
          </div>
        </div>
        <div class="box" id="viewandsettings">
          <h2 title="View and Settings"><span></span> 查看与设置 </h2>
          <div id="list003" class="list">
            <ul id="ul003">
              <li class="defaultLink"><a href="observe.html#gridimages">图像显示</a></li>
              <li class="defaultLink"><a href="observe.html#calibresult">标定结果</a></li>
              <li class="defaultLink"><a href="settings.html#setting_calib">标定设置</a></li>
              <li class="defaultLink"><a href="settings.html#setting_import_export_result">导入导出设置</a></li>
            </ul> 
          </div>
        </div>
      </div>

      <div class="wrap">

        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html"> Home </a></li>
              <!--  THINGS GOES HERE 1  -->
              <!--  <li><a href="xxx.html"> xxx </a></li>  -->
              <!--  <li> xxx </li>  -->
              <li> 关于标定算法 </li>
            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
            </ul>
          </div>
        </div>

        <div class="content mainContent">
          <!--  THINGS GOES HERE 2  -->
          <!--  myself.html - description  -->
          <h1 class="title">关于标定算法</h1>
          <span class="subtitle"></span> <p/>
          <div class="descr"> <a name="details"></a>
          <p> Caliboy ver. 2.0.0.201803 的标定算法为基于张正友方法的OpenCV实现.</p>
          <ul>
            <li> <a href="http://research.microsoft.com/en-us/um/people/zhang/" target="_blank">张正友</a>标定项目 - <a href="http://research.microsoft.com/en-us/um/people/zhang/Calib/">A Flexible New Technique for Camera Calibration</a></li>
            <li> 技术报告: <a href="http://10.254.1.82/cache/16/03/microsoft.com/943b1059c770930d46232184d3ec5193/TR98-71.pdf" target="_blank">A Flexible New Technique for Camera Calibration</a></li>
            <li> <a href="http://www.opencv.org/" target="_blank">OpenCV</a>标定说明文档 - <a href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=calibrate" target="_blank">Camera Calibration and 3D Reconstruction</a></li>
          </ul>
          <p><b>基本步骤</b></p>
          <ul>
            <p> 1. 估计内部参数</p>
            <ul>
              <p> 1.1. 求取各图像对应的单应矩阵<b>H</b>_i; </p>
              <p> 1.2. 由所有<b>H</b>_i联合求中间变量<b>B</b>=(<b>K</b>^-T)*(<b>K</b>^-1),并由<b>B</b>分解得到相机内参.此处旨在初步估计内部参数,即主要为像素焦距.故<b>K</b>的主点位置设置为图像中心,即<b>K</b>仅有fx和fy两个未知数.<b>B</b>的公式将得到极大的简化,相应地由<b>B</b>计算fx和fy也十分简单. </p>
            </ul>
            <p> 2. 估计相对位置</p>
            <ul>
              <p> 1.1. 根据初步估计的内参矩阵<b>K</b>计算归一图像坐标并在此基础上再次求取各图像对应的单应矩阵<b>H</b>_i; </p>
              <p> 1.2. <b>H</b>_i中直接包含相对位置信息[<b>R</b>_i|<b>t</b>_i]; </p>
              <p> 1.3. 通过最小化重投影误差初步优化[<b>R</b>_i|<b>t</b>_i](采用LevMarq,迭代20次). </p>
            </ul>
            <p> 3. LevMarq优化</p>
            <ul>
              <p> 通过最小化重投影误差以获得最后优化结果. </p>
            </ul>
          </ul>
          <p><b>相关说明</b></p>
          <ul>
            <p> 1. OpenCV相机标定模型中无畸变因子s的估计;</p>
            <p> 2. 由于不考虑畸变因子,在将主点位置设定为图像中心(不进行估计)的条件下,内参矩阵仅有fx和fy两个未知数,故一幅图像也能求得一个内存矩阵;</p>
            <p> 3. OpenCV标定实现中可以估计高阶畸变参数[k4,k5,k6],但这些系数误差较大且实际作用不明显,故未采用这些参数.</p>
          </ul>
          </div>
        </div>
      </div>

    </div> 

    <div class="ft"> <span></span> </div>

  </div>
  <script src="scripts/functions.js" type="text/javascript"></script>
</body>
</html>
